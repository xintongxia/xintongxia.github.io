(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{"+Ht4":function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return m})),a.d(t,"renderToDom",(function(){return u}));a("E5k/");var n=a("mXGw"),r=a("xARA"),o=a("+qjn");var l=function(e){var t,a;function r(){return e.apply(this,arguments)||this}return a=e,(t=r).prototype=Object.create(a.prototype),t.prototype.constructor=t,t.__proto__=a,r.prototype.render=function(){var e=this.props,t=e.startTime,a=e.endTime,r=e.onChangeDay,o=e.allDay,l=e.onChangeAllDay,i=e.selectedTime,s=Math.round((a-t)/864e5),c=function(e){var t=new Date(e);return t.getMonth()+1+"/"+t.getDate()+"/"+t.getFullYear()};return n.createElement("div",{className:"control-panel"},n.createElement("h3",null,"Heatmap"),n.createElement("p",null,"Map showing earthquakes",n.createElement("br",null),"from ",n.createElement("b",null,c(t))," to ",n.createElement("b",null,c(a)),"."),n.createElement("hr",null),n.createElement("div",{className:"input"},n.createElement("label",null,"All Days"),n.createElement("input",{type:"checkbox",name:"allday",checked:o,onChange:function(e){return l(e.target.checked)}})),n.createElement("div",{className:"input "+(o?"disabled":"")},n.createElement("label",null,"Each Day: ",c(i)),n.createElement("input",{type:"range",disabled:o,min:1,max:s,step:1,onChange:function(e){var a=e.target.value;r(t+864e5*a)}})),n.createElement("hr",null),n.createElement("p",null,"Data source:"," ",n.createElement("a",{href:"https://docs.mapbox.com/mapbox-gl-js/assets/earthquakes.geojson"},"earthquakes.geojson")),n.createElement("div",{className:"source-link"},n.createElement("a",{href:"https://github.com/visgl/react-map-gl/tree/5.2-release/examples/heatmap",target:"_new"},"View Code â†—")))},r}(n.PureComponent),i=a("DRYM"),s={maxzoom:9,type:"heatmap",paint:{"heatmap-weight":["interpolate",["linear"],["get","mag"],0,0,6,1],"heatmap-intensity":["interpolate",["linear"],["zoom"],0,1,9,3],"heatmap-color":["interpolate",["linear"],["heatmap-density"],0,"rgba(33,102,172,0)",.2,"rgb(103,169,207)",.4,"rgb(209,229,240)",.6,"rgb(253,219,199)",.8,"rgb(239,138,98)",.9,"rgb(255,201,101)"],"heatmap-radius":["interpolate",["linear"],["zoom"],0,2,9,20],"heatmap-opacity":["interpolate",["linear"],["zoom"],7,1,9,0]}};function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){var a=new Date(t),n=a.getFullYear(),r=a.getMonth(),o=a.getDate();return{type:"FeatureCollection",features:e.features.filter((function(e){var t=new Date(e.properties.time);return t.getFullYear()===n&&t.getMonth()===r&&t.getDate()===o}))}}var m=function(e){var t,a;function r(t){var a;(a=e.call(this,t)||this)._onViewportChange=function(e){return a.setState({viewport:e})},a._handleChangeDay=function(e){a.setState({selectedTime:e}),a.state.earthquakes&&a.setState({data:p(a.state.earthquakes,e)})},a._handleChangeAllDay=function(e){a.setState({allDay:e}),a.state.earthquakes&&a.setState({data:e?a.state.earthquakes:p(a.state.earthquakes,a.state.selectedTime)})};var n=(new Date).getTime();return a.state={viewport:{latitude:40,longitude:-100,zoom:3,bearing:0,pitch:0},allDay:!0,startTime:n,endTime:n,selectedTime:n,earthquakes:null},a._handleChangeDay=a._handleChangeDay.bind(c(a)),a._handleChangeAllDay=a._handleChangeAllDay.bind(c(a)),a}a=e,(t=r).prototype=Object.create(a.prototype),t.prototype.constructor=t,t.__proto__=a;var m=r.prototype;return m.componentDidMount=function(){var e=this;Object(i.a)("https://docs.mapbox.com/mapbox-gl-js/assets/earthquakes.geojson",(function(t,a){if(!t){var n=a.features,r=n[0].properties.time,o=n[n.length-1].properties.time;e.setState({data:a,earthquakes:a,endTime:r,startTime:o,selectedTime:r})}}))},m.render=function(){var e=this.state,t=e.viewport,a=e.data,r=e.allDay,i=e.selectedTime,c=e.startTime,p=e.endTime;return n.createElement("div",{style:{height:"100%",position:"relative"}},n.createElement(o.default,Object.assign({},t,{width:"100%",height:"100%",mapStyle:"mapbox://styles/mapbox/dark-v9",onViewportChange:this._onViewportChange,mapboxApiAccessToken:""}),a&&n.createElement(o.Source,{type:"geojson",data:a},n.createElement(o.Layer,s))),n.createElement(l,{containerComponent:this.props.containerComponent,startTime:c,endTime:p,selectedTime:i,allDay:r,onChangeDay:this._handleChangeDay,onChangeAllDay:this._handleChangeAllDay}))},r}(n.Component);function u(e){Object(r.render)(n.createElement(m,null),e)}}}]);